{"ast":null,"code":"import * as actionTypes from \"./actions\";\n\n// =========== GLOBAL STATE ===========\nconst initialState = {\n  selectedItems: [],\n  // contains a list of objects\n  totalPrice: 0,\n  tableId: 5,\n  cartId: 1,\n  searchInputValue: \"\",\n  products: [],\n  reserveTime: []\n};\nconst reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case actionTypes.ADD_TO_CART:\n      {\n        // Default value of quantity is 1 when cart is empty\n        if (state.selectedItems.length === 0) {\n          action.product.prod_quantity = 1;\n        }\n\n        // if item has already been added to shopping cart, only updates the quantity\n        if (state.selectedItems.some(item => item.prod_id === action.product.prod_id)) {\n          const itemIndex = state.selectedItems.findIndex(item => {\n            return item.prod_id === action.product.prod_id;\n          });\n          const itemObj = {\n            ...state.selectedItems[itemIndex]\n          };\n          itemObj.prod_quantity += 1;\n          const itemArray = [...state.selectedItems];\n          itemArray[itemIndex] = itemObj;\n          return {\n            ...state,\n            selectedItems: itemArray\n          };\n        } else {\n          // Adding new items to shopping cart\n          action.product.prod_quantity = 1;\n          let array = [...state.selectedItems];\n          array.push(action.product);\n          return {\n            ...state,\n            selectedItems: array\n          };\n        }\n      }\n    case actionTypes.INCREASE_QUANTITY:\n      {\n        // index value of item\n        const itemIndex = state.selectedItems.findIndex(item => {\n          return item.prod_id === action.prod_obj.prod_id;\n        });\n        const itemObj = {\n          ...state.selectedItems[itemIndex]\n        };\n        itemObj.prod_quantity += 1;\n        const itemArray = [...state.selectedItems];\n        itemArray[itemIndex] = itemObj;\n        return {\n          ...state,\n          selectedItems: itemArray\n        };\n      }\n    case actionTypes.DECREASE_QUANTITY:\n      {\n        // index value of item\n        const itemIndex = state.selectedItems.findIndex(item => {\n          return item.prod_id === action.prod_obj.prod_id;\n        });\n        const itemObj = {\n          ...state.selectedItems[itemIndex]\n        };\n        itemObj.prod_quantity -= 1;\n\n        // If quantity is zero, remove item from cart\n        if (itemObj.prod_quantity === 0) {\n          const itemArray = [...state.selectedItems];\n          itemArray.splice(itemIndex, 1);\n          return {\n            ...state,\n            selectedItems: itemArray\n          };\n        }\n        const itemArray = [...state.selectedItems];\n        itemArray[itemIndex] = itemObj;\n        return {\n          ...state,\n          selectedItems: itemArray\n        };\n      }\n    case actionTypes.CALCULATE_TOTAL_PRICE:\n      {\n        return {\n          ...state,\n          totalPrice: action.total_price\n        };\n      }\n    case actionTypes.SEARCH_PRODUCT_LISTING:\n      {\n        return {\n          ...state,\n          searchInputValue: action.event.target.value\n        };\n      }\n    case actionTypes.ALL_PRODUCT_LISTING:\n      {\n        return {\n          ...state,\n          products: action.products\n        };\n      }\n  }\n  return state;\n};\nexport default reducer;","map":{"version":3,"names":["actionTypes","initialState","selectedItems","totalPrice","tableId","cartId","searchInputValue","products","reserveTime","reducer","state","action","type","ADD_TO_CART","length","product","prod_quantity","some","item","prod_id","itemIndex","findIndex","itemObj","itemArray","array","push","INCREASE_QUANTITY","prod_obj","DECREASE_QUANTITY","splice","CALCULATE_TOTAL_PRICE","total_price","SEARCH_PRODUCT_LISTING","event","target","value","ALL_PRODUCT_LISTING"],"sources":["/Users/sunwoong/Desktop/onegun/project/kiosk/kioskreact/client/src/store/reducer.js"],"sourcesContent":["import * as actionTypes from \"./actions\";\n\n// =========== GLOBAL STATE ===========\nconst initialState = {\n  selectedItems: [], // contains a list of objects\n  totalPrice: 0,\n  tableId: 5,\n  cartId: 1,\n  searchInputValue: \"\",\n  products: [],\n  reserveTime: [],\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.ADD_TO_CART: {\n      // Default value of quantity is 1 when cart is empty\n      if (state.selectedItems.length === 0) {\n        action.product.prod_quantity = 1;\n      }\n\n      // if item has already been added to shopping cart, only updates the quantity\n      if (\n        state.selectedItems.some(\n          (item) => item.prod_id === action.product.prod_id\n        )\n      ) {\n        const itemIndex = state.selectedItems.findIndex((item) => {\n          return item.prod_id === action.product.prod_id;\n        });\n\n        const itemObj = {\n          ...state.selectedItems[itemIndex],\n        };\n\n        itemObj.prod_quantity += 1;\n\n        const itemArray = [...state.selectedItems];\n        itemArray[itemIndex] = itemObj;\n\n        return {\n          ...state,\n          selectedItems: itemArray,\n        };\n      } else {\n        // Adding new items to shopping cart\n        action.product.prod_quantity = 1;\n        let array = [...state.selectedItems];\n        array.push(action.product);\n\n        return {\n          ...state,\n          selectedItems: array,\n        };\n      }\n    }\n\n    case actionTypes.INCREASE_QUANTITY: {\n      // index value of item\n      const itemIndex = state.selectedItems.findIndex((item) => {\n        return item.prod_id === action.prod_obj.prod_id;\n      });\n\n      const itemObj = {\n        ...state.selectedItems[itemIndex],\n      };\n\n      itemObj.prod_quantity += 1;\n\n      const itemArray = [...state.selectedItems];\n      itemArray[itemIndex] = itemObj;\n\n      return {\n        ...state,\n        selectedItems: itemArray,\n      };\n    }\n\n    case actionTypes.DECREASE_QUANTITY: {\n      // index value of item\n      const itemIndex = state.selectedItems.findIndex((item) => {\n        return item.prod_id === action.prod_obj.prod_id;\n      });\n\n      const itemObj = {\n        ...state.selectedItems[itemIndex],\n      };\n\n      itemObj.prod_quantity -= 1;\n\n      // If quantity is zero, remove item from cart\n      if (itemObj.prod_quantity === 0) {\n        const itemArray = [...state.selectedItems];\n        itemArray.splice(itemIndex, 1);\n        return {\n          ...state,\n          selectedItems: itemArray,\n        };\n      }\n\n      const itemArray = [...state.selectedItems];\n      itemArray[itemIndex] = itemObj;\n\n      return {\n        ...state,\n        selectedItems: itemArray,\n      };\n    }\n\n    case actionTypes.CALCULATE_TOTAL_PRICE: {\n      return {\n        ...state,\n        totalPrice: action.total_price,\n      };\n    }\n\n    case actionTypes.SEARCH_PRODUCT_LISTING: {\n      return {\n        ...state,\n        searchInputValue: action.event.target.value,\n      };\n    }\n\n    case actionTypes.ALL_PRODUCT_LISTING: {\n      return {\n        ...state,\n        products: action.products,\n      };\n    }\n  }\n\n  return state;\n};\n\nexport default reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}